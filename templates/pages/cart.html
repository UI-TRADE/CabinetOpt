{% extends "main.html" %}
{% load cart_tags %}
{% load catalog_tags %}

{% block page %}
	{% block content %}

    <div style="display:none">
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    </div>    

    <div class="container-fluid">
        <div class="row justify-content-center">    
            <main id="cart-table" class="col cart-view">

                <div class="cart-view__content">
                    <div class="cart-view__title">Корзина</div>

                    {% include "components/cart/cart_items.html" with cart=cart %}

                    <div class="cart-actions">

                        <form id="createOrderFromTable" method="post" action="{% url 'cart:create' %}">
                            {% csrf_token %}
                            <input type="hidden" name="split_orders" value="1"/>
                        </form>
                        <div class="text-right">

                            <div class="cart-result">
                                <div class="cart-result__title">Итог:</div>
                                <div class="cart-result__total-count">{{ cart|length|floatformat:"0" }} шт</div>
                                <div class="cart-result__total-weight">{{ cart.get_total_weight|floatformat:"2" }} гр</div>
                                <div class="cart-result__total-price">{{ cart.get_total_price|floatformat:"0" }} р</div>
                            </div>

                            <a
                                href="#"
                                onclick="document.getElementById('createOrderFromTable').submit();"
                                role="button"
                                class="btn btn-primary mb-2 mr-sm-2 send-to-order"
                            >
                                Оформить заказ
                            </a>
                        </div>

                    </div>

                </div>

            </main>
        </div>
    </div>

	{% endblock %}
{% endblock %}
